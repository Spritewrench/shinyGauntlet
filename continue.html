<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>shiny-gauntlet</title>

  <!-- build:css main.min.css -->
  <link rel="stylesheet" href="css/main.css"> 
  <link rel="stylesheet" href="css/stylesheet.css" type="text/css" charset="utf-8" />
  <script type="text/javascript" src="js/lib/jszip-utils.min.js"></script>
  <script type="text/javascript" src="js/lib/jszip.min.js"></script>  
  <script type="text/javascript" src="js/lib/lz-string-1.3.3.js"></script>
  
  <!-- /build -->
</head>

<body>
  

  <div id="shiny-gauntlet-game" class="game" ></div>



  <!-- build:js main.min.js -->
  <script>
    var world = new Object();
    var seed = localStorage.getItem("dungeonSeed");
    localStorage.setItem("roomCount",0);
    localStorage.setItem("bossCount",0);
    var x = 9;//seed[0];
    var y = 9;//seed[1];
    var worldLimitX = x;
    var worldLimitY = y;
    var dunSize = 81;

    
    localStorage.setItem("heroStartX",''+0);
    localStorage.setItem("heroStartY",''+0);

    if(seed[4] >= x){
      localStorage.setItem("winX",''+x-1);
    }
    if(seed[5] >= y){
      localStorage.setItem("winY",''+y-1);
    }       
    


    
    
      var string = LZString.decompress(localStorage.getItem("continue"));
      
      
      //console.log(JSON.parse(string));
    temp = JSON.parse(string);
    //console.log(temp);

    for(var i =-100; i < 100; i++){
      for(var j =-100; j < 100; j++){

        world[''+i+j] = temp[''+i+j];
        world[''+i+j].visited = false;
      
      }    
    }
    
    
    
   //arrange dungeon
    var holderX = 0;
    var holderY = 0;
    var monKey = 0;
    var i = 0;
    var j = 0;

   

    
function lost(x,y){
   var randomizer = Math.floor((Math.random()*4));
   

   world[''+x+y].dir[randomizer]++;
   switch(randomizer){
     case 0:
       y--;
       holderY--;
       break;
     case 1:
       x++;
       holderX++;
       break;
     case 2:
       y++;
       holderY++;
       break;              
     case 3:
       x--;
       holderX--;
       break;       
   }
   if(randomizer - 2 >= 0){
     world[''+x+y].dir[randomizer-2]++;
   }
   else{
     world[''+x+y].dir[randomizer+2]++;
   }
   var monType = Math.floor((Math.random()*9)+1);
   var monPref = Math.floor((Math.random()*9));

   
    for(var k = 0; k < world[''+x+y].monCount; k ++){
      //monster stats          
      placeMon(x,y,monType,monType,k);

    }   
  
   
   
}
   

   
 function placeMon(i,j,monType,monPref,k){
       
      world[''+i+j].mon[k] = new Object();
      world[''+i+j].mon[k].x = 400;
      world[''+i+j].mon[k].y = 300;
      world[''+i+j].cleared = false;
      
      if(world[''+i+j].monCount == 2){
        world[''+i+j].mon[0].x = 300;
        world[''+i+j].mon[0].y = 300;

        world[''+i+j].mon[1].x = 500;
        world[''+i+j].mon[1].y = 300;            
      }
      else{
        world[''+i+j].mon[k].x = 400;
        world[''+i+j].mon[k].y = 300;        
      }

      world[''+i+j].mon[k].hp = 30;
      world[''+i+j].mon[k].speed = 2;
      world[''+i+j].mon[k].name = 'mon'+monType;
      world[''+i+j].mon[k].monType = parseInt(monType);
      world[''+i+j].mon[k].def = 0;
      world[''+i+j].mon[k].size = 128;
      world[''+i+j].mon[k].prefix = parseInt(monPref);
      var prefix = "<Insert Prefix>";
      //prefix system
      switch(world[''+i+j].mon[k].prefix){
          default:
            //normal
            break;                         
      }
      var monName = "";
      switch( world[''+i+j].mon[k].monType){
        default:
          break;
        case 1:
          monName = "Minotaur";
          world[''+i+j].mon[k].hp = 100;
          break;
        case 2:
          monName = "Slime";
          world[''+i+j].mon[k].hp = 100;
          world[''+i+j].mon[k].speed = 4;
          break;   
        case 3:
          monName = "Lich";
          world[''+i+j].mon[k].hp = 100;
          world[''+i+j].mon[k].speed = 3;
          break;  
        case 4:
          monName = "Scion";
          world[''+i+j].mon[k].hp = 100;

          break;
        case 5:
          monName = "Dragon";
          world[''+i+j].mon[k].hp = 100;
          world[''+i+j].mon[k].speed = 1;

          break;              
        case 6:
          monName = "Sword";
          break;
        case 7:
          monName = "Spear";
          break;
        case 8:
          monName = "Dagger";
          break;  
        case 9:
          monName = "Mace";
          break;            
      }
      if(world[''+i+j].mon[k].monType < 6){
        switch( world[''+i+j].mon[k].prefix){
          default:
            break;
          //King
          case 0:
            prefix = "King";
            break;               
          //twin
          case 1:
            prefix = "Twin";
            
            break;
          //Lazy
          case 2:
            prefix = "Lazy";
            world[''+i+j].mon[k].speed -= 1;
            break;  
          //Hasty
          case 3:
            prefix = "Hasty";
            world[''+i+j].mon[k].speed += 1;
            break;
          //iron
          case 4:
            prefix = "Iron";
            world[''+i+j].mon[k].def += 5;
            break;
          //wimpy
          case 5:
            prefix = "Wimpy";
            world[''+i+j].mon[k].def -= 5;
            break;                
          //hulking
          case 6:
            prefix = "Hulking";
            world[''+i+j].mon[k].hp += 20;
            break; 
          //wounded
          case 7:
            prefix = "Wounded";
            world[''+i+j].mon[k].hp -= 20;
            break;      
          //Titanic
          case 8:
            prefix = "Titanic";
            world[''+i+j].mon[k].size += 50;
            break;      
          //Impish
          case 9:
            prefix = "Impish";
            world[''+i+j].mon[k].size -= 50;
            break;      

        }  
        if(world[''+i+j].mon[k].prefix == 1){
          world[''+i+j].monCount = 2;
        }
        else{
          world[''+i+j].monCount = 1;
        }
      }
      else{
        switch( world[''+i+j].mon[k].prefix){
          default:
            break;
          //King
          case 0:
            prefix = "Trusty";
            break;               
          //twin
          case 1:
            prefix = "Heavy";
            
            break;
          //Lazy
          case 2:
            prefix = "Light";
            
            break;  
          //Hasty
          case 3:
            prefix = "Keen";
           
            break;
          //iron
          case 4:
            prefix = "Dull";
            
            break;
          //wimpy
          case 5:
            prefix = "Lucky";
            
            break;                
          //hulking
          case 6:
            prefix = "UnLucky";
            
            break; 
          //wounded
          case 7:
            prefix = "Blessed";
            
            break;      
          //Titanic
          case 8:
            prefix = "Cursed";
           
            break;      
          //Impish
          case 9:
            prefix = "Vorpal";
           
            break;       
        }
      }

      world[''+i+j].msg = "A "+prefix+" "+monName;

    }   
   
  </script>
  <script src="js/lib/phaser.js"></script>
  <script src="js/boot.js"></script>
  <script src="js/preloader.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/monBehaviour.js"></script>
  <script src="js/game.js"></script>
  <script src="js/win.js"></script>
  <script src="js/main.js"></script>
  
  <script language="javascript" src="js/lib/lz-string-1.3.3.js"></script>
  <script language="javascript" src="js/lib/jszip.min.js"></script>
  <script language="javascript" src="js/lib/FileSaver.js"></script>
  <script language="javascript" src="js/lib/jszip-utils.min.js"></script>
  <!-- /build -->
  

</body>
</html>

