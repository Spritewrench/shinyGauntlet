<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>shiny-gauntlet</title>

  <!-- build:css main.min.css -->
  <link rel="stylesheet" href="css/main.css"> 
  <link rel="stylesheet" href="css/stylesheet.css" type="text/css" charset="utf-8" />
  <!-- /build -->
</head>

<body>
  

  <div id="shiny-gauntlet-game" class="game" ></div>



  <!-- build:js main.min.js -->
  <script>
    var world = [];
    var seed = localStorage.getItem("dungeonSeed");
    var x = seed[0];
    var y = seed[1];
    var worldLimitX = x;
    var worldLimitY = y;
    var monQue = seed.substr(6, seed.length);
    localStorage.setItem("heroStartX",''+seed[2]);
    localStorage.setItem("heroStartY",''+seed[3]);
    localStorage.setItem("winX",''+seed[4]);
    localStorage.setItem("winY",''+seed[5]);
    if(seed[4] >= x){
      localStorage.setItem("winX",''+x-1);
    }
    if(seed[5] >= y){
      localStorage.setItem("winY",''+y-1);
    }       
    
    
    var mon = [];
    mon = monQue.match(new RegExp(".{1,2}", "g"));      
    

    
    
    
    for(var i =0; i < x; i++){
      for(var j =0; j < y; j++){

        world[''+i+j] = new Object();
        world[''+i+j].posX = 0;
        world[''+i+j].posY = 0;
        world[''+i+j].light = 800;

        
        
        // # of monsters on screen
        world[''+i+j].monCount = 1;
        world[''+i+j].mon = []
        for(var k = 0; k < world[''+i+j].monCount; k ++){
          //monster stats
          var monKey = Math.floor((Math.random()*mon.length)+0);
          world[''+i+j].mon[k] = new Object();
          world[''+i+j].mon[k].x = 400;
          world[''+i+j].mon[k].y = 300;
          world[''+i+j].mon[k].hp = 10;
          world[''+i+j].mon[k].speed = 2;
          world[''+i+j].mon[k].name = 'player';
          world[''+i+j].mon[k].monType = mon[monKey][0];
          world[''+i+j].mon[k].def = 0;
          world[''+i+j].mon[k].size = 128;
          world[''+i+j].mon[k].prefix = parseInt(mon[monKey][1]);
          var prefix = "";
          var typeMon ="";
          switch (world[''+i+j].mon[k].monType){
              case 1:
                typeMon = "Regular";
                break;
              case 2:
                typeMon = "Turret";
                break;
          }
          //prefix system
          switch(world[''+i+j].mon[k].prefix){
              default:
                //normal
                break;              
              case 1:
                //iron
                prefix = "Iron";
                world[''+i+j].mon[k].def = 1;
                break;
              case 2:
                //wimpy
                prefix = "Wimpy";
                world[''+i+j].mon[k].def = -2;
                break;
              case 3:
                //hulking
                prefix = "Hulking";
                 world[''+i+j].mon[k].hp += 2;
                break;
              case 4:
                //wounded
                prefix = "Wounded";
                world[''+i+j].mon[k].hp -= 2;
                break;
              case 5:
                //hasty
                prefix = "Hasty";
                world[''+i+j].mon[k].speed++;
                break;
              case 6:
                //lazy
                prefix = "Lazy";
                world[''+i+j].mon[k].speed--;
                break;     
              case 7:
                //titanic
                prefix = "Titanic";
                world[''+i+j].mon[k].size = world[''+i+j].mon[k].size*2;
                break;
              case 8:
                //impish
                prefix = "Impish";
                world[''+i+j].mon[k].size = world[''+i+j].mon[k].size/2;
                break;              
          }
          world[''+i+j].msg = prefix+' '+typeMon+' Monster';
        }      
      }    
    } 

  </script>
  <script src="js/lib/phaser.js"></script>
  <script src="js/boot.js"></script>
  <script src="js/preloader.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/monBehaviour.js"></script>
  <script src="js/game.js"></script>
  <script src="js/win.js"></script>
  <script src="js/main.js"></script>

  <!-- /build -->
  

</body>
</html>

