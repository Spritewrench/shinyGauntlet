<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>shiny-gauntlet</title>

  <!-- build:css main.min.css -->
  <link rel="stylesheet" href="css/main.css"> 
  <link rel="stylesheet" href="css/stylesheet.css" type="text/css" charset="utf-8" />
  <!-- /build -->
</head>

<body>
  

  <div id="shiny-gauntlet-game" class="game" ></div>



  <!-- build:js main.min.js -->
  <script>
    var world = [];
    var seed = localStorage.getItem("dungeonSeed");
    var x = seed[0];
    var y = seed[1];
    var worldLimitX = x;
    var worldLimitY = y;
    var monQue = seed.substr(6, seed.length);
    localStorage.setItem("heroStartX",''+seed[2]);
    localStorage.setItem("heroStartY",''+seed[3]);
    localStorage.setItem("winX",''+seed[4]);
    localStorage.setItem("winY",''+seed[5]);
    if(seed[4] >= x){
      localStorage.setItem("winX",''+x-1);
    }
    if(seed[5] >= y){
      localStorage.setItem("winY",''+y-1);
    }       
    
    
    var mon = [];
    mon = monQue.match(new RegExp(".{1,2}", "g"));      
    

    
    
    
    for(var i =0; i < x; i++){
      for(var j =0; j < y; j++){

        world[''+i+j] = new Object();
        world[''+i+j].posX = 0;
        world[''+i+j].posY = 0;
        world[''+i+j].light = 800;

        
        
        // # of monsters on screen
        world[''+i+j].monCount = 1;
        world[''+i+j].mon = [];
        var monKey = Math.floor((Math.random()*mon.length)+0);
        for(var k = 0; k < world[''+i+j].monCount; k ++){
          //monster stats
          
          world[''+i+j].mon[k] = new Object();
          world[''+i+j].mon[k].x = 400;
          world[''+i+j].mon[k].y = 300;
          
          if(world[''+i+j].monCount == 2){
            world[''+i+j].mon[0].x = 300;
            world[''+i+j].mon[0].y = 300;

            world[''+i+j].mon[1].x = 500;
            world[''+i+j].mon[1].y = 300;            
          }
          
          world[''+i+j].mon[k].hp = 30;
          world[''+i+j].mon[k].speed = 2;
          world[''+i+j].mon[k].name = 'mon'+mon[monKey][0];
          world[''+i+j].mon[k].monType = parseInt(mon[monKey][0]);
          world[''+i+j].mon[k].def = 0;
          world[''+i+j].mon[k].size = 128;
          world[''+i+j].mon[k].prefix = parseInt(mon[monKey][1]);
          var prefix = "<Insert Prefix>";
          //prefix system
          switch(world[''+i+j].mon[k].prefix){
              default:
                //normal
                break;                         
          }
          var monName = "";
          switch( world[''+i+j].mon[k].monType){
            default:
              break;
            case 1:
              monName = "Minotaur";
              world[''+i+j].mon[k].hp = 100;
              break;
            case 2:
              monName = "Slime";
              world[''+i+j].mon[k].hp = 100;
              world[''+i+j].mon[k].def = -10;
              world[''+i+j].mon[k].speed = 4;
              break;   
            case 3:
              monName = "Lich";
              world[''+i+j].mon[k].hp = 100;
              break;  
            case 4:
              monName = "Scion";
              world[''+i+j].mon[k].hp = 100;
              
              break;
            case 5:
              monName = "Dragon";
              world[''+i+j].mon[k].hp = 100;
              world[''+i+j].mon[k].speed = 1;
              
              break;              
            case 6:
              monName = "Sword";
              break;
            case 7:
              monName = "Spear";
              break;
            case 8:
              monName = "Dagger";
              break;                            
          }
          if(world[''+i+j].mon[k].monType < 6){
            switch( world[''+i+j].mon[k].prefix){
              default:
                break;
              //King
              case 0:
                prefix = "King";
                break;               
              //twin
              case 1:
                prefix = "Twin";
                world[''+i+j].monCount = 2;
                break;
              //Lazy
              case 2:
                prefix = "Lazy";
                world[''+i+j].mon[k].speed -= 1;
                break;  
              //Hasty
              case 3:
                prefix = "Hasty";
                world[''+i+j].mon[k].speed += 1;
                break;
              //iron
              case 4:
                prefix = "Iron";
                world[''+i+j].mon[k].def += 5;
                break;
              //wimpy
              case 5:
                prefix = "Wimpy";
                world[''+i+j].mon[k].def -= 5;
                break;                
              //hulking
              case 6:
                prefix = "Hulking";
                world[''+i+j].mon[k].hp += 50;
                break; 
              //wounded
              case 7:
                prefix = "Wounded";
                world[''+i+j].mon[k].hp -= 50;
                break;      
              //Titanic
              case 8:
                prefix = "Titanic";
                world[''+i+j].mon[k].size += 50;
                break;      
              //Impish
              case 9:
                prefix = "Impish";
                world[''+i+j].mon[k].size -= 50;
                break;      

            }          
          }
          else{
          }
                      
          world[''+i+j].msg = "A "+prefix+" "+monName;
          
        }      
      }    
    } 

  </script>
  <script src="js/lib/phaser.js"></script>
  <script src="js/boot.js"></script>
  <script src="js/preloader.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/monBehaviour.js"></script>
  <script src="js/game.js"></script>
  <script src="js/win.js"></script>
  <script src="js/main.js"></script>

  <!-- /build -->
  

</body>
</html>

